---
tags:
  - GCD
  - Multithreading
---
### Описание
**Dispatch, больше известный как GCD** – фреймворк, содержащий в себе языковые конструкции, позволяющие нам комфортно и достаточно просто управлять потоками, задачами для выполнения и ресурсами, которые нам необходимо захватить. GCD работает на системном уровне, таким образом он может удовлетворить потребности всех запущенных приложений на девайсе, при этом управляя ресурсами эффективно. GCD реализован на языке C, поэтому фактически является низкоуровневым фреймворком. Однако начиная со Swift 3.0 обзавелся читаемым Swift API. GCD поддерживается как в iOS, так и в macOS, watchOS и tvOS.

### Термины

**Queue (очередь)** — является основным примитивом GCD. Очередь представляет собой сущность, выполняющую задачи, поступающие на вход, на одном или множестве потоков. Очередь работает по принципу FIFO, таким образом первая задача на очереди будет первой направлена на выполнение на потоке.
[[Dispatch Queue]]

### Проблемы
- [[Deadlock]]
	- Два (а иногда и более) потока заходят «в тупик», если все они застревают в ожидании друг друга для завершения или выполнения другого действия. Первое действие не может быть закончено, потому что оно ожидает окончания второго. А второе не может быть закончено, потому что оно ожидает окончания первого. 
	- Deadlock возможен только тогда, когда используется вложенный многопоточный доступ к ресурсам. Избегать подобные ситуации довольно просто, старайтесь не проектировать заведомо сложные решения там, где можно обойтись простым и избегайте вложенные доступы к ресурсам.
	- ==**Никогда не вызывайте метод sync на main queue, потому что это приведет к взаимной блокировке (deadlock) вашего приложения!**==
- Livelock
	- Ситуация, при которой два или более потока не могут выполнять полезной работы по причине борьбы за общий ресурс. От дедлока ситуация отличается тем, что потоки не просто ждут, но безуспешно пытаются выйти из состояния ступора (поэтому live, а не dead).
- Priority Inversion
	- Ситуация, в которой высокоприоритетная задача ожидает выполнения низкоприоритетной задачи.
- [[Race condition]]
	- Ситуация, в которой ожидаемый порядок выполнения операций становится непредсказуемым, в результате чего страдает закладываемая логика.

### Примеры
